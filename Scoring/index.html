



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://redisearch.io/Scoring/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>Scoring Documents - RediSearch Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#scoring"_"in"_"redisearch" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://redisearch.io" title="RediSearch Documentation" class="md-header-nav__button md-logo">
          
            <img src="../logo_small.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                RediSearch Documentation
              </span>
              <span class="md-header-nav__topic">
                Scoring Documents
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/RedisLabsModules/RediSearch/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../logo_small.png" width="48" height="48">
      
    </span>
    RediSearch Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/RedisLabsModules/RediSearch/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Quick_Start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Commands/" title="Command Reference" class="md-nav__link">
      Command Reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Configuring/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Administration/" title="Administration" class="md-nav__link">
      Administration
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Query_Syntax/" title="Query Syntax" class="md-nav__link">
      Query Syntax
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Stopwords/" title="Stop-Words" class="md-nav__link">
      Stop-Words
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Aggregations/" title="Aggregations (NEW!)" class="md-nav__link">
      Aggregations (NEW!)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Escaping/" title="Tokenization and Escaping" class="md-nav__link">
      Tokenization and Escaping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sorting/" title="Sortable Values" class="md-nav__link">
      Sortable Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Tags/" title="Tag Fields" class="md-nav__link">
      Tag Fields
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Highlight/" title="Highlighting Results" class="md-nav__link">
      Highlighting Results
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Scoring Documents
      </label>
    
    <a href="./" title="Scoring Documents" class="md-nav__link md-nav__link--active">
      Scoring Documents
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tfidf"_"default" title="TFIDF (Default)" class="md-nav__link">
    TFIDF (Default)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tfidfdocnorm" title="TFIDF.DOCNORM" class="md-nav__link">
    TFIDF.DOCNORM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bm25" title="BM25" class="md-nav__link">
    BM25
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dismax" title="DISMAX" class="md-nav__link">
    DISMAX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docscore" title="DOCSCORE" class="md-nav__link">
    DOCSCORE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hamming" title="HAMMING" class="md-nav__link">
    HAMMING
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Extensions/" title="Extension API" class="md-nav__link">
      Extension API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Stemming/" title="Stemming Support" class="md-nav__link">
      Stemming Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Synonyms/" title="Synonyms Support" class="md-nav__link">
      Synonyms Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../payloads/" title="Document Payloads" class="md-nav__link">
      Document Payloads
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Clients
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Clients
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Clients/" title="Client Libraries" class="md-nav__link">
      Client Libraries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python_client/" title="Python API" class="md-nav__link">
      Python API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../java_client/" title="Java API" class="md-nav__link">
      Java API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../go_client/" title="Go API" class="md-nav__link">
      Go API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Design Documents
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Design Documents
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../design/gc/" title="Garbage Collection" class="md-nav__link">
      Garbage Collection
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Articles
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Articles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Threading/" title="Multi-Threading in RediSearch" class="md-nav__link">
      Multi-Threading in RediSearch
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Chinese/" title="Chinese Support" class="md-nav__link">
      Chinese Support
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tfidf"_"default" title="TFIDF (Default)" class="md-nav__link">
    TFIDF (Default)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tfidfdocnorm" title="TFIDF.DOCNORM" class="md-nav__link">
    TFIDF.DOCNORM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bm25" title="BM25" class="md-nav__link">
    BM25
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dismax" title="DISMAX" class="md-nav__link">
    DISMAX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docscore" title="DOCSCORE" class="md-nav__link">
    DOCSCORE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hamming" title="HAMMING" class="md-nav__link">
    HAMMING
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/RedisLabsModules/RediSearch/edit/master/docs/Scoring.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="scoring&quot;_&quot;in&quot;_&quot;redisearch">Scoring In RediSearch<a class="headerlink" href="#scoring&quot;_&quot;in&quot;_&quot;redisearch" title="Permanent link">&para;</a></h1>
<p>RediSearch comes with a few very basic scoring functions to evaluate document relevance. They are all based on document scores and term frequency. This is regardless of the ability to use <a href="../Sorting/">sortable fields</a>. Scoring functions are specified by adding the <code>SCORER {scorer_name}</code> argument to a search query.</p>
<p>If you prefer a custom scoring function, it is possible to add more functions using the <a href="../Extensions">Extension API</a>.</p>
<p>These are the pre-bunldled scoring functions availabe in RediSearch and how they work. Each function is mentioned by registered name, that can be passed as a SCORER argument in FT.SEARCH.</p>
<h2 id="tfidf&quot;_&quot;default">TFIDF (Default)<a class="headerlink" href="#tfidf&quot;_&quot;default" title="Permanent link">&para;</a></h2>
<p>Basic <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF-IDF scoring</a> with a few extra features thrown inside:</p>
<ol>
<li>
<p>For each term in each result we calculate the TF-IDF score of that term to that document. Frequencies are weighted based on field weights that are pre-determined, and each term's frequency is <strong>normalized by the highest term frequency in each document</strong>.</p>
</li>
<li>
<p>We multiply the total TF-IDF for the query term by the a priory document score given on <code>FT.ADD</code>.</p>
</li>
<li>
<p>We give a penalty to each result based on "slop" or cumulative distance between the search terms: exact matches will get no penlty, but matches where the search terms are distant see their score reduced significantly. For each 2-gram of consecutive terms, we find the minimal distance between them. The penalty is the square root of the sum of the distances, squared - <code>1/sqrt(d(t2-t1)^2 + d(t3-t2)^2 + ...)</code>. </p>
</li>
</ol>
<p>So for N terms in a document D, <code>T1...Tn</code>, the resulting score could be described with this python function:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_score</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="n">doc</span><span class="p">):</span>
    <span class="c1"># the sum of tf-idf</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># the distance penalty for all terms</span>
    <span class="n">dist_penalty</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">term</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">terms</span><span class="p">):</span>
        <span class="c1"># tf normalized by maximum frequency</span>
        <span class="n">tf</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="n">term</span><span class="p">)</span> <span class="o">/</span> <span class="n">doc</span><span class="o">.</span><span class="n">max_freq</span>

        <span class="c1"># idf is global for the index, and not calculated each time in real life</span>
        <span class="n">idf</span> <span class="o">=</span> <span class="n">log2</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">total_docs</span> <span class="o">/</span> <span class="n">docs_with_term</span><span class="p">(</span><span class="n">term</span><span class="p">))</span>

        <span class="n">score</span> <span class="o">+=</span> <span class="n">tf</span><span class="o">*</span><span class="n">idf</span>

        <span class="c1"># sum up the distance penalty</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dist_penalty</span> <span class="o">+=</span> <span class="n">min_distance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">terms</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>

    <span class="c1"># multiply the score by the document score</span>
    <span class="n">score</span> <span class="o">*=</span> <span class="n">doc</span><span class="o">.</span><span class="n">score</span>

    <span class="c1"># divide the score by the root of the cumulative distance</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">/=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">dist_penalty</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">score</span>
</pre></div>


<h2 id="tfidfdocnorm">TFIDF.DOCNORM<a class="headerlink" href="#tfidfdocnorm" title="Permanent link">&para;</a></h2>
<p>Identical to the default TFIDF scorer, with one important distinction:</p>
<p>Term frequencies are normalized by the length of the document (in number of terms). The length is weighted, so that if a document contains two terms, one in a feild that has a weight 1 and one in a field with a weight of 5, the total frequency is 6, not 2.</p>
<div class="codehilite"><pre><span></span>FT.SEARCH myIndex &quot;foo&quot; SCORER TFIDF.DOCNORM
</pre></div>


<h2 id="bm25">BM25<a class="headerlink" href="#bm25" title="Permanent link">&para;</a></h2>
<p>A vraiation on the basic TF-IDF scorer, see <a href="https://en.wikipedia.org/wiki/Okapi_BM25">this Wikipedia article for more info</a>.</p>
<p>We also multiply the relevance score for each document by the a priory docment score, and apply a penalty based on slop as in TFIDF.</p>
<div class="codehilite"><pre><span></span>FT.SEARCH myIndex &quot;foo&quot; SCORER BM25
</pre></div>


<h2 id="dismax">DISMAX<a class="headerlink" href="#dismax" title="Permanent link">&para;</a></h2>
<p>A simple scorer that sums up the frequencies of the matched terms; in the case of union clauses, it will give the maximum value of those matches. No other penalties or factors are applied.</p>
<p>It is not a 1 to 1 implementation of <a href="https://wiki.apache.org/solr/DisMax">Solr's DISMAX algorithm</a>, but follows it in broad terms.</p>
<div class="codehilite"><pre><span></span>FT.SEARCH myIndex &quot;foo&quot; SCORER DISMAX
</pre></div>


<h2 id="docscore">DOCSCORE<a class="headerlink" href="#docscore" title="Permanent link">&para;</a></h2>
<p>A scoring function that just returns the a priory score of the document without applying any calculations to it. Since document scores can be updates, this can be useful if you'd like to use an external score and nothing further.</p>
<div class="codehilite"><pre><span></span>FT.SEARCH myIndex &quot;foo&quot; SCORER DOCSCORE
</pre></div>


<h2 id="hamming">HAMMING<a class="headerlink" href="#hamming" title="Permanent link">&para;</a></h2>
<p>Scoring by the (inverse) Hamming Distance between the documents' payload and the query payload. Since we are interested in the <strong>nearest</strong> neighbors, we inverse the hamming distance (<code>1/(1+d)</code>) so that a distance of 0 gives a perfect score of 1 and is the highest rank. </p>
<p>This works only if:</p>
<ol>
<li>The document has a payload.</li>
<li>The query has a payload.</li>
<li>Both are <strong>exactly the same length</strong>.</li>
</ol>
<p>Payloads are binary safe, and having payloads with a length that's a multiple of 64 bits yields slightly faster results. </p>
<p>Example:</p>
<div class="codehilite"><pre><span></span>127.0.0.1:6379&gt; FT.CREATE idx SCHEMA foo TEXT
OK
127.0.0.1:6379&gt; FT.ADD idx 1 1 PAYLOAD &quot;aaaabbbb&quot; FIELDS foo hello
OK
127.0.0.1:6379&gt; FT.ADD idx 2 1 PAYLOAD &quot;aaaacccc&quot; FIELDS foo bar
OK

127.0.0.1:6379&gt; FT.SEARCH idx &quot;*&quot; PAYLOAD &quot;aaaabbbc&quot; SCORER HAMMING WITHSCORES
1) (integer) 2
2) &quot;1&quot;
3) &quot;0.5&quot; // hamming distance of 1 --&gt; 1/(1+1) == 0.5
4) 1) &quot;foo&quot;
   2) &quot;hello&quot;
5) &quot;2&quot;
6) &quot;0.25&quot; // hamming distance of 3 --&gt; 1/(1+3) == 0.25
7) 1) &quot;foo&quot;
   2) &quot;bar&quot;
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Highlight/" title="Highlighting Results" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Highlighting Results
              </span>
            </div>
          </a>
        
        
          <a href="../Extensions/" title="Extension API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Extension API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-89573912-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>